@import "tailwindcss";

:root {
  --background: 0 0% 100%;
  --foreground: 222.2 84% 4.9%;
  --card: 0 0% 100%;
  --card-foreground: 222.2 84% 4.9%;
  --popover: 0 0% 100%;
  --popover-foreground: 222.2 84% 4.9%;
  --primary: 262.1 83.3% 57.8%;
  --primary-foreground: 210 20% 98%;
  --secondary: 210 40% 94%;
  --secondary-foreground: 222.2 84% 4.9%;
  --muted: 210 40% 96%;
  --muted-foreground: 215.4 16.3% 46.9%;
  --accent: 210 40% 96%;
  --accent-foreground: 222.2 84% 4.9%;
  --destructive: 0 84.2% 60.2%;
  --destructive-foreground: 210 20% 98%;
  --border: 214.3 31.8% 91.4%;
  --input: 214.3 31.8% 91.4%;
  --ring: 262.1 83.3% 57.8%;
  --radius: 0.5rem;
}

.dark {
  --background: 222.2 84% 4.9%;
  --foreground: 210 40% 98%;
  --card: 222.2 84% 4.9%;
  --card-foreground: 210 40% 98%;
  --popover: 222.2 84% 4.9%;
  --popover-foreground: 210 40% 98%;
  --primary: 262.1 83.3% 57.8%;
  --primary-foreground: 210 20% 98%;
  --secondary: 217.2 32.6% 17.5%;
  --secondary-foreground: 210 40% 98%;
  --muted: 217.2 32.6% 17.5%;
  --muted-foreground: 215 20.2% 65.1%;
  --accent: 217.2 32.6% 17.5%;
  --accent-foreground: 210 40% 98%;
  --destructive: 0 62.8% 30.6%;
  --destructive-foreground: 210 40% 98%;
  --border: 217.2 32.6% 17.5%;
  --input: 217.2 32.6% 17.5%;
  --ring: 212.7 26.8% 83.9%;
}

* {
  border-color: hsl(var(--border));
}

body {
  background: hsl(var(--background));
  color: hsl(var(--foreground));
  font-feature-settings: "rlig" 1, "calt" 1;
  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Card styling */
.card-enhanced {
  background: hsl(var(--card));
  color: hsl(var(--card-foreground));
  border: 1px solid hsl(var(--border));
  border-radius: calc(var(--radius) + 2px);
  box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
}

.card-enhanced:hover {
  border-color: hsl(var(--border));
  box-shadow: 
    0 4px 6px -1px rgb(0 0 0 / 0.1),
    0 2px 4px -2px rgb(0 0 0 / 0.1);
  transform: translateY(-1px);
}

/* Line clamp utilities */
.line-clamp-1 {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 1;
}

.line-clamp-2 {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
}

.line-clamp-3 {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 3;
}

/* Green badge for new chapters */
.bg-green-100 {
  background-color: rgb(220 252 231);
}

.text-green-800 {
  color: rgb(22 101 52);
}

.border-green-300 {
  border-color: rgb(134 239 172);
}

/* Ensure all overlay components have solid backgrounds */
[data-radix-popper-content-wrapper],
[data-sonner-toaster] [data-sonner-toast],
.sonner-loading-wrapper,
[data-state="open"][data-side] {
  background-color: hsl(0 0% 100%) !important;
  border: 1px solid hsl(214.3 31.8% 91.4%) !important;
}

/* Fix any transparent toast backgrounds */
[data-sonner-toast] {
  background-color: white !important;
  border: 1px solid hsl(214.3 31.8% 91.4%) !important;
  color: hsl(222.2 84% 4.9%) !important;
}

/* Comprehensive Keyboard Navigation & Accessibility Improvements */

/* High-contrast focus indicators for better visibility */
*:focus-visible {
  outline: 2px solid hsl(262.1 83.3% 57.8%) !important;
  outline-offset: 2px !important;
  border-radius: 4px;
}

/* Enhanced focus for interactive elements */
button:focus-visible,
[role="button"]:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible,
[tabindex]:focus-visible {
  outline: 2px solid hsl(262.1 83.3% 57.8%) !important;
  outline-offset: 2px !important;
  box-shadow: 0 0 0 4px hsl(262.1 83.3% 57.8% / 0.2) !important;
}

/* Radix UI specific focus states */
[data-radix-collection-item]:focus,
[data-radix-collection-item][data-highlighted],
[data-state="open"]:focus-visible {
  outline: 2px solid hsl(262.1 83.3% 57.8%) !important;
  outline-offset: 1px !important;
  background-color: hsl(262.1 83.3% 57.8% / 0.1) !important;
}

/* Select dropdown items */
[data-radix-select-item][data-highlighted] {
  background-color: hsl(262.1 83.3% 57.8%) !important;
  color: hsl(210 20% 98%) !important;
}

/* Improve focus visibility for select triggers */
[data-radix-select-trigger]:focus-visible {
  outline: 2px solid hsl(262.1 83.3% 57.8%) !important;
  outline-offset: 2px !important;
  box-shadow: 0 0 0 4px hsl(262.1 83.3% 57.8% / 0.2) !important;
}

/* Skip to main content link for screen readers */
.skip-link {
  position: absolute;
  top: -40px;
  left: 6px;
  background: hsl(262.1 83.3% 57.8%);
  color: white;
  padding: 8px;
  text-decoration: none;
  border-radius: 4px;
  z-index: 9999;
}

.skip-link:focus {
  top: 6px;
}

/* Ensure proper focus order and visibility */
[tabindex="-1"]:focus {
  outline: none !important;
}

/* Keyboard navigation hints */
.keyboard-navigable::after {
  content: " (Use Tab to navigate, Enter to select)";
  font-size: 0.75rem;
  color: hsl(215.4 16.3% 46.9%);
  position: absolute;
  left: -9999px;
}

.keyboard-navigable:focus::after {
  position: static;
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  *:focus-visible {
    outline: 3px solid currentColor !important;
    outline-offset: 2px !important;
  }
}